### 3.1 获取镜像

​	使用 docker pull 命名从网络上下载镜像

格式：

​	 **docker pull xxxxx[:TAG]**                    //xxxx为仓库名

对于Docker镜像来说，如果不显示地指定TAG，则默认会选择 **latest** 标签

> 镜像文件一般有若干层组成（docker pull 时会出现一堆带有ID的数据），下载过程中会获取并输出镜像的各层信息。
>
> 层（Layer），其实是AUFS（Advanced Union File System，一种联合文件系统）中的重要概念，是 **实现增量保存与更新** 的基础
>
> 所以Docker镜像的 **存储** 和 **传输** 都是 **分层** 的。



### 3.2 查看镜像信息

▶使用 **docker images** 命令可以列出本地主机上已有的镜像。



▶ 为了 **方便使用镜像** ，使用 docker tag 命令为本地镜像 **添加新的标签** 。

> **docker tag 仓库名xxxx:[标签名aaa] 仓库名yyyyy[标签名bbb]**

将 镜像 仓库名xxxx:[标签名aaa]  添加一个标签 命名为  仓库名yyyyy[标签名bbb]

>这两个标签的镜像ID完全一致，标签在这里起到了 **引用或快捷方式** 的作用



▶ 使用 docker inspect 命令获取 **镜像** 的 **详细信息**

​	 **docker inspect 镜像ID**                          //此处只能用镜像ID

> docker inspect 命令返回的是一个JSON格式的消息，如果只要其中一项内容，可以使用
>
>   -f 参数来指定，例如，获取镜像的 Architecture 信息
>
>  **docker inspect -f {{".Architecture "}} 镜像ID**      //注意有点 .



▶ 使用 history 命令查看镜像历史

​	history 命令将会查看镜像文件各个层的信息



### 3.3 搜寻镜像

​	使用 **docker search** 命令可以搜索远端仓库中的 **共享的镜像** 。、



### 3.4 删除镜像和清理镜像

​	删除镜像分两种，通过镜像的标签删除镜像、通过镜像ID删除镜像

▶ **通过镜像标签删除镜像**

​	格式：

​	 **docker rmi 仓库名:标签名**

> 当同一个镜像拥有多个标签时，上面的命令只是删除该镜像多个标签中的指定标签而已，
>
> 并不影响镜像文件。
>
> 但当镜像只剩下一个标签时，该命令会彻底删除该镜像



▶ **通过镜像ID删除镜像**

​	格式：

​	 **docker rmi 镜像ID**

> 使用该命令时，会先删除所有指向该镜像的标签，然后删除镜像文件本身。



【注意】当有该镜像创建的容器存在时，镜像文件默认是无法删除的

> 如果想要强行删除，使用 -f 参数
>
>  **docker rmi -f 镜像ID**
>
> 使用强制删除时，原来被强制删除的镜像换了一 个**新的ID** 继续存在系统中，
>
> 这是一个标签为 **<none>** 的临时镜像



▶ **清理镜像**

使用 Docker 一段时间后，系统中可能会遗留一些临时的镜像文件，以及一些没有被使用的镜像

使用  **docker image prune -f ** 命令

会自动清理临时的遗留镜像文件层，最后提示释放的存储空间





### 3.5 创建镜像 或者 构建镜像

​	创建镜像的方法有三种：

	>1 . 基于已有镜像的容器创建          docker commit
	>
	>2 . 基于本地模板导入                    docker import
	>
	>3 . 基于Dockerfile创建                 Dockerfile  + docker build

这一个小节中 介绍前两种，第三种在第8章中介绍



▶ **基于已有镜像的容器创建**

​	格式：

​     **docker commit [OPTIONS] 容器ID 新的仓库名:新的TAG**             //该命令是在本机环境运行

> 关于 OPTIONS
>
> 1     -a "作者信息", --author="作者信息"
>
> 2    -m "提交信息", --message="提交信息"
>
> 3    -p true,   --pause=true     提交时暂停运行

▶ **基于本地模板导入**

将本地 tar 归档压缩文件（这是一个模板，不是之前先前导出的镜像文件）导入镜像

格式：

​	 **cat xxxx.tar | docker import - 仓库名:TAG名**

注意 load 是 导入之前导出的镜像文件，import 是根据模板导入，不一样

load 是导入，import 是创建（构建）

import  : import的是容器的一个快照文件，这丢弃所有的历史记录和元数据信息

load : load一个镜像存储文件，将保存完整记录，体积更大。



### 3.6 存出镜像（导出镜像）和 载入镜像（导入镜像）

▶**存出镜像（导出镜像），导出镜像到本地文件**

格式

​	 **docker save -o 导出文件名 仓库名:标签TAG**

也可使用 docker export

▶**载入镜像（导入镜像），从本地 tar 文件导入到本地镜像库**

格式

​	 **docker load --input xxxxx.tar**

​	或

   	  **docker load < xxxxx.tar**



### 3.7 上传镜像

上传镜像到远端仓库

格式

​	docker push 本地仓库名：标签TAG